<!DOCTYPE html>
<html>
<head>
    <title>BBC Compilation Fix Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>BBC Compilation Fix Test</h1>
    
    <div class="test-section">
        <h2>Current Fix Applied</h2>
        <p>✅ Reverted to standard WASM modules (cc65, ca65, ld65)</p>
        <p>✅ Removed bbc.lib to avoid crt0.s page border error</p>
        <p>✅ Modified bbc.cfg to make STARTUP segment optional</p>
        <p>✅ Using bbc.cfg configuration</p>
        <p>✅ Using fs65-bbc filesystem</p>
    </div>
    
    <div class="test-section">
        <h2>Test Instructions</h2>
        <ol>
            <li>Open the IDE: <a href="http://localhost:8000/" target="_blank">http://localhost:8000/</a></li>
            <li>Select "BBC Micro" from the platform dropdown</li>
            <li>Try to compile the <code>simple_test_no_lib.c</code> program</li>
            <li>Check if compilation succeeds without the crt0.s error</li>
        </ol>
    </div>
    
    <div class="test-section">
        <h2>Test Program</h2>
        <pre><code>// Simple BBC test program
// This should work with the modified bbc.cfg that makes STARTUP optional

int main() {
    // Simple program that just returns
    return 0;
}</code></pre>
    </div>
    
    <div class="test-section">
        <h2>Expected Result</h2>
        <ul>
            <li>✅ No "Segment 'STARTUP' does not exist" error (STARTUP is now optional)</li>
            <li>✅ No "crt0.s page border" error</li>
            <li>✅ Successful compilation</li>
            <li>✅ Small binary output (minimal program)</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>If it still fails</h2>
        <p>Please share the exact error message. The next steps would be:</p>
        <ul>
            <li>Try using <code>none.cfg</code> instead of <code>bbc.cfg</code></li>
            <li>Create a custom minimal startup file</li>
            <li>Build proper WASM modules from the working cc65 fork</li>
        </ul>
    </div>
    
    <script>
        // Auto-open the IDE after a short delay
        window.addEventListener('load', () => {
            setTimeout(() => {
                window.open('http://localhost:8000/', '_blank');
            }, 2000);
        });
    </script>
</body>
</html>
